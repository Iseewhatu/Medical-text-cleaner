<!doctype html>
<html lang="en">
  <head>
    <title>Automated Medical Text Cleaner - Results</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
      body {
        background-color: #dcd6f7;
        color: #2c2c2c;
        font-family: 'Segoe UI', sans-serif;
      }
      .navbar {
        background-color: #424874 !important;
      }
      .navbar-brand {
        color: #ffffff !important;
        font-weight: bold;
      }
      .container {
        background: white;
        margin-top: 40px;
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
      }
      .btn-custom {
        background-color: #424874;
        color: white;
        font-weight: 500;
        border: none;
      }
      .btn-custom:hover {
        background-color: #30304d;
      }
      .list-group-item {
        background-color: #f3f2fc;
        border-color: #d1cfe2;
        color: #2c2c2c;
      }
      .badge.bg-primary {
        background-color: #424874;
      }
      .text-muted {
        color: #666 !important;
      }
    </style>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="/">Automated Medical Text Cleaner</a>
      </div>
    </nav>

    <!-- Results Section -->
    <div class="container mt-4">
      <h3 class="mb-4">‚úÖ Cleaned Data Results</h3>

      <!-- Download Buttons -->
      <div class="mb-3">
        <a href="{{ download_url }}" class="btn btn-custom me-2">Download Cleaned Data</a>
        <a href="{{ log_url }}" class="btn btn-secondary">Download Replacement Log</a>
      </div>

      <!-- Replacements Summary -->
      {% if counter %}
      <div class="mt-4">
        <h5>üîÅ Replacements Summary</h5>
        <ul class="list-group">
          {% for key, value in counter.items() %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
              {{ key }} ‚Üí {{ replacements[key] if replacements and key in replacements else '?' }}
              <span class="badge bg-primary rounded-pill">{{ value }}</span>
            </li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}

      <!-- Chart -->
      {% if chart_url %}
      <div class="mt-5">
        <h5>üìä Replacement Frequency Chart</h5>
        <img src="{{ chart_url }}" class="img-fluid border rounded" alt="Replacement Chart">
        <p class="mt-2 text-muted">
          This chart shows how many times each shorthand term was replaced with its full form during the cleaning process.
          Higher bars represent more frequent corrections in the clinical notes.
        </p>
      </div>
      {% endif %}

      <!-- Footer -->
      <footer class="mt-5 text-muted small text-center">
        &copy; 2025 Automated Medical Text Cleaner
      </footer>
    </div>
  </body>
</html>
